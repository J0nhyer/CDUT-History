## 项目AI介绍

我这个AI系统主要是做校史智能问答的。核心是集成了阿里云的通义千问大模型，用的是qwen-plus和qwen-max两个模型。但不是简单地调用API，我做了很多工程化的工作。

首先是RAG技术的应用。我把学校的历史资料、人物信息、事件数据都整理成了结构化的知识库，存在MySQL数据库里。当用户提问的时候，AI不是直接回答，而是先从知识库里检索相关内容，然后把检索到的知识作为上下文注入到大模型的prompt里，这样AI的回答就更准确、更有依据，不会胡编乱造。

其次是实现了流式对话。用的是SSE（Server-Sent Events）技术，AI生成回复的时候是一个字一个字实时推送给前端的，而不是等全部生成完再返回，这样用户体验会好很多，不用干等着。

然后是多轮对话管理。我设计了一套完整的会话系统，每个用户的每次对话都会创建一个session，历史消息都存在数据库里。当用户继续提问的时候，AI能够读取之前的对话记录，理解上下文，实现连贯的交互。不是那种每次都失忆的AI。

技术架构上，后端用Spring Boot + Spring WebFlux做响应式编程，处理高并发的流式请求。写了一个BailianClient客户端来封装阿里云的API调用，处理SSE流的解析、错误重试等逻辑。还有一套完整的Prompt模板系统，可以动态注入知识库内容、设定AI的角色和回答风格。

前端用Vue 3 + Axios来处理流式数据，实时渲染AI的回复。整个对话界面支持创建新会话、查看历史会话、删除会话等完整功能。

最关键的创新点是RAG的落地实践。很多人说RAG，但真正做好不容易。我这里实现了知识检索、语义匹配、上下文构建、Prompt工程的完整流程。知识库的设计也很讲究，不是简单堆数据，而是结构化存储，支持多维度检索，确保AI能快速找到相关信息。

整个AI系统的目标就是让大模型真正能用起来，不是演示Demo那种，而是能实际部署、稳定运行、回答准确的生产级应用。从API对接、知识库构建、流式传输、会话管理到错误处理，每个环节都做了工程化的考虑。

---

## 🎯 后端技术栈 (Java/Spring Boot)

### 核心框架
- **Spring Boot 3.2.6** - 应用框架
- **Spring Web** - RESTful API
- **Spring WebFlux** - 响应式Web支持
- **Spring Security** - 安全认证与授权
- **Spring Validation** - 数据验证

### AI集成
- **阿里云百炼 (DashScope)** - 通义千问大模型
  - 主模型: `qwen-plus` / `qwen-max`
  - 嵌入模型: `text-embedding-v3`
  - API地址: `https://dashscope.aliyuncs.com`
  - 功能特性:
    - 流式对话 (SSE)
    - 知识库增强 (RAG)
    - 上下文记忆
    - Temperature控制 (0.2)
    - Max Tokens限制 (1024)

### 数据库与持久化
- **MyBatis Plus 3.5.11** - ORM框架
- **MySQL Connector** - 数据库驱动
- **MySQL** - 关系型数据库 (javawebdb)

### API文档
- **Knife4j 4.3.0** - API文档工具 (Swagger UI增强版)

### 工具库
- **Lombok** - 代码简化 (自动生成getter/setter等)
- **Jackson** - JSON序列化/反序列化
- **Maven** - 项目构建管理

### Java版本
- **JDK 17**

---

## 🎨 前端技术栈 (Vue 3)

### 核心框架
- **Vue 3.5.13** - 渐进式JavaScript框架
- **Vue Router 4.2.5** - 官方路由管理器
- **Vite 5.4.8** - 新一代前端构建工具
- **@vitejs/plugin-vue 5.0.5** - Vue 3的Vite插件

### UI组件库
- **Element Plus 2.8.4** - 基于Vue 3的组件库
- **@element-plus/icons-vue 2.3.1** - Element Plus图标库

### 3D可视化
- **Three.js 0.180.0** - 3D图形渲染引擎
  - WebGL渲染
  - 场景管理
  - 相机控制
  - 光照系统
  - 材质与纹理
- **3d-force-graph 1.79.0** - 3D力导向图可视化库
  - 节点关系图
  - 交互式探索

### 数据可视化
- **D3.js 7.9.0** - 数据驱动的文档操作库
  - 数据绑定
  - SVG操作
  - 力导向布局

### 动画库
- **GSAP 3.13.0** - 专业级JavaScript动画库
  - Timeline动画
  - Tween动画
  - Easing函数
- **AOS 2.3.4** - 滚动动画库 (Animate On Scroll)
  - 页面滚动触发动画
  - 多种预设效果

### 网络请求
- **Axios 1.7.7** - Promise based HTTP客户端
  - RESTful API调用
  - 请求/响应拦截
  - 错误处理

### 工具库
- **UUID 10.0.0** - 唯一标识符生成
- **classlist-polyfill** - classList API兼容性

---

## 🤖 AI功能模块

### 对话系统
- **流式对话响应** - 基于Server-Sent Events (SSE)
- **上下文记忆管理** - 多轮对话历史保存
- **会话持久化** - 数据库存储聊天记录
- **会话管理** - 创建、查询、删除会话

### 知识库系统
- **数据库知识库服务** (`DatabaseKnowledgeBaseService`)
- **文本知识库服务** (`TextKnowledgeBaseService`)
- **知识检索增强** - RAG (Retrieval-Augmented Generation)
- **语义搜索** - 基于embedding的相似度匹配

### AI助手服务
- **EnhancedAiAssistantService** - 增强型AI助手
- **ChatContextService** - 聊天上下文管理
- **BailianClient** - 百炼API客户端封装

### Prompt工程
- 系统提示词模板
- 知识上下文注入
- 角色设定 (system/user/assistant)

---

## 📦 项目特色功能

### 3D交互场景
- **KeywordRain3D.vue** - 3D关键词雨
  - 第一人称视角 (FPS)
  - WASD键盘移动控制
  - 鼠标视角控制
  - 重力系统
  - 碰撞检测
  - 关键词捕捉交互
  - Pointer Lock API

### 知识图谱
- **StarMapKnowledgeGraph.vue** - 星图知识图谱
  - 3D力导向图
  - 节点关系可视化
  - 交互式探索
  - 动态数据加载

### 智能对话
- **AI聊天助手** - 基于通义千问
- **知识库问答** - RAG检索增强
- **历史对话管理** - 上下文保持
- **实时流式响应** - SSE技术

### 人物展示
- **PersonsPage.vue** - 人物列表页
- **PersonDetailAdvancedPage.vue** - 人物详情页
- **DrawReveal.vue** - 手绘识别交互

### 游戏化探索
- **DinoGameMain.vue** - 恐龙探险游戏
- **DinoCampus3D.vue** - 3D校园场景
- **DinoExplorer.vue** - 恐龙探索器

---

## 🗄️ 数据库架构

### 主数据库
- **数据库名**: `javawebdb`
- **字符集**: UTF-8
- **时区**: UTC

### 核心数据表
- **person** - 人物基础信息
- **person_profile** - 人物详细档案
- **person_timeline** - 人物时间线
- **person_awards** - 人物奖项
- **history_events** - 历史事件
- **history_media** - 历史媒体资源
- **knowledge_base** - 知识库
- **ai_chat_sessions** - AI聊天会话
- **ai_chat_messages** - AI聊天消息
- **ai_chat_context** - AI聊天上下文
- **users** - 用户表
- **academic_nodes** - 学术节点
- **academic_links** - 学术关系

---

## 🏗️ 项目架构

### 后端架构
```
org.cdut.ai
├── client/          # 外部服务客户端 (BailianClient)
├── config/          # 配置类 (Security, WebClient, Properties)
├── controller/      # REST API控制器
├── dto/             # 数据传输对象
├── mapper/          # MyBatis数据访问层
├── model/           # 数据模型/实体类
└── service/         # 业务逻辑层
    └── impl/        # 服务实现类
```

### 前端架构
```
src/
├── assets/          # 静态资源 (图片、视频)
├── api/             # API接口封装
├── components/      # Vue组件
├── views/           # 页面视图
├── data/            # 静态数据
├── services/        # 业务服务
├── utils/           # 工具函数
├── router.js        # 路由配置
└── main.js          # 应用入口
```

---

## 🔧 开发工具链

### 构建工具
- **Maven** (后端)
- **Vite** (前端)

### 开发环境
- **Node.js** - 前端运行环境
- **Java 17** - 后端运行环境
- **MySQL** - 数据库

### IDE配置
- **.idea/** - IntelliJ IDEA配置
- **.vscode/** - Visual Studio Code配置

---

## 🌐 API通信

### 通信协议
- **HTTP/HTTPS** - RESTful API
- **SSE** (Server-Sent Events) - 流式数据推送

### 数据格式
- **JSON** - 主要数据交换格式

### CORS配置
- 跨域资源共享支持

---

## 🔐 安全特性

### 认证与授权
- **Spring Security** - 安全框架
- **密码加密** - BCrypt哈希
- **JWT Token** (推测)

### API安全
- **请求验证** - Spring Validation
- **API密钥管理** - 环境变量注入
- **超时控制** - 请求超时限制

---

## 📊 性能优化

### 前端优化
- **懒加载** - 路由懒加载
- **资源预加载** - import.meta.glob
- **动画性能** - GSAP硬件加速
- **3D渲染优化** - Three.js性能调优

### 后端优化
- **响应式编程** - WebFlux异步处理
- **连接池** - 数据库连接池
- **流式传输** - SSE降低延迟

---

## 🎯 项目特点总结

1. **前后端分离架构** - Vue 3 + Spring Boot
2. **AI能力集成** - 阿里云百炼大模型
3. **3D可视化** - Three.js实现沉浸式体验
4. **知识图谱** - 3D力导向图展示知识关系
5. **流式对话** - SSE实现实时AI交互
6. **知识库增强** - RAG检索提升AI准确性
7. **游戏化设计** - 提升用户参与度
8. **响应式编程** - 提高并发处理能力

---

## 📝 备注

- **项目定位**: 成都理工大学数字记忆平台
- **核心功能**: AI问答、历史展示、人物介绍、知识图谱
- **技术特色**: AI + 3D + 可视化 + 游戏化
- **开发语言**: Java 17 + JavaScript (Vue 3)

---

**文档生成时间**: 2025-11-25
**项目版本**: 1.0-SNAPSHOT
