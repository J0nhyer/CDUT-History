# 核心代码快速导航

复制下面的路径，在Windsurf中按 Ctrl+P 打开文件，然后按 Ctrl+G 输入行号跳转

---

## 用户管理模块

### UserServiceImpl.java
```
BackWeb/BackWeb/src/main/java/org/cdut/ai/service/impl/UserServiceImpl.java
```
- 第14行：BCrypt密码加密器
- 第17-39行：register() 注册方法
- 第41-48行：login() 登录方法
- 第50-61行：updatePassword() 修改密码

### UserController.java
```
BackWeb/BackWeb/src/main/java/org/cdut/ai/controller/UserController.java
```
- 第25-48行：register() 注册接口
- 第50-71行：login() 登录接口
- 第73-95行：updatePassword() 修改密码接口

---

## 人物管理模块

### Person.java (实体类)
```
BackWeb/BackWeb/src/main/java/org/cdut/ai/model/Person.java
```
- 第18-56行：Person类完整定义
- 第47-55行：非数据库字段（biography, relationships）

### PersonBiography.java
```
BackWeb/BackWeb/src/main/java/org/cdut/ai/model/PersonBiography.java
```
- 第17-47行：传记实体类

### PersonRelationship.java
```
BackWeb/BackWeb/src/main/java/org/cdut/ai/model/PersonRelationship.java
```
- 第16-44行：关系实体类

### PersonServiceImpl.java (核心业务)
```
BackWeb/BackWeb/src/main/java/org/cdut/ai/service/impl/PersonServiceImpl.java
```
- 第38行：ObjectMapper JSON处理器
- 第40-52行：getPersonDetail() 获取人物详情
- 第54-60行：getAllPersons() 获取列表
- 第76-126行：saveOrUpdatePersonDetail() 保存人物（核心方法）
- 第128-140行：deletePerson() 删除人物
- 第145-191行：fillPersonDetails() 填充关联数据
- 第196-209行：parseKeyTags() JSON解析
- 第211-224行：parseBiographyTags() 传记标签解析
- 第229-235行：deleteRelatedData() 删除关联数据

### PersonController.java (接口层)
```
BackWeb/BackWeb/src/main/java/org/cdut/ai/controller/PersonController.java
```
- 第24-33行：getAllPersons() 获取人物列表
- 第35-44行：getAllAdvancedPersons() 高级展示数据
- 第46-60行：getAdvancedPerson() 单人高级数据
- 第62-76行：getPersonDetail() 获取详情
- 第78-87行：searchByName() 搜索人物
- 第89-98行：getPersonsByStatus() 按状态筛选
- 第100-126行：saveOrUpdatePerson() 保存人物
- 第151-170行：deletePerson() 删除人物

---

## 历史管理模块

### HistoryEvent.java
```
BackWeb/BackWeb/src/main/java/org/cdut/ai/model/HistoryEvent.java
```
- 第14-46行：历史事件实体类

### HistoryServiceImpl.java
```
BackWeb/BackWeb/src/main/java/org/cdut/ai/service/impl/HistoryServiceImpl.java
```
- 第31-73行：getAllEventsWithParsedJson() 获取事件并解析JSON
- 第75-78行：getEventById() 获取事件详情
- 第106-125行：getCompleteTimelineData() 完整时间轴

### HistoryController.java
```
BackWeb/BackWeb/src/main/java/org/cdut/ai/controller/HistoryController.java
```
- 第31-46行：getAllEvents() 获取所有事件
- 第51-70行：getEventById() 事件详情
- 第75-90行：getEventsByType() 按类型筛选
- 第95-110行：getEventsByImportance() 按重要性筛选
- 第159-173行：getCompleteTimeline() 完整时间轴

---

## 学术星图模块

### AcademicNode.java
```
BackWeb/BackWeb/src/main/java/org/cdut/ai/model/AcademicNode.java
```
- 第17-59行：学术节点实体类

### AcademicUniverseServiceImpl.java
```
BackWeb/BackWeb/src/main/java/org/cdut/ai/service/impl/AcademicUniverseServiceImpl.java
```
- 第42-89行：getUniverseData() 获取完整星图数据
- 第91-99行：getUniversity() 获取大学信息
- 第147-229行：saveOrUpdateUniverseData() 批量保存

### AcademicUniverseController.java
```
BackWeb/BackWeb/src/main/java/org/cdut/ai/controller/AcademicUniverseController.java
```
- 第25-39行：getUniverseData() 获取星图数据
- 第41-55行：getUniversity() 大学信息
- 第73-87行：getAllNodes() 所有节点
- 第142-156行：saveOrUpdateUniverseData() 批量导入

---

## AI助手模块

### AiAssistantController.java
```
BackWeb/BackWeb/src/main/java/org/cdut/ai/controller/AiAssistantController.java
```
- 第28-65行：chat() SSE流式聊天
- 第67-73行：sendChunk() 发送数据块

### BailianClient.java
```
BackWeb/BackWeb/src/main/java/org/cdut/ai/client/BailianClient.java
```
- AI客户端实现

---

## 配置文件

### application.properties
```
BackWeb/BackWeb/src/main/resources/application.properties
```
- 第7-11行：MySQL数据库配置
- 第13-16行：MyBatis-Plus配置

### pom.xml
```
BackWeb/BackWeb/pom.xml
```
- 第14行：Spring Boot版本
- 第19-68行：核心依赖

### SecurityConfig.java
```
BackWeb/BackWeb/src/main/java/org/cdut/ai/config/SecurityConfig.java
```
- 安全配置类

---

## 数据库SQL文件

### 表结构SQL
```
BackWeb/BackWeb/src/main/resources/sql/person_schema.sql (人物表)
BackWeb/BackWeb/src/main/resources/sql/cdut_history_schema.sql (历史表)
BackWeb/BackWeb/src/main/resources/sql/academic_universe_schema.sql (星图表)
BackWeb/BackWeb/src/main/resources/sql/init_tables.sql (初始化表)
```

### 数据SQL
```
BackWeb/BackWeb/src/main/resources/sql/person_data_inserts.sql (54人数据)
BackWeb/BackWeb/src/main/resources/sql/cdut_history_data_inserts.sql (23条历史)
BackWeb/BackWeb/src/main/resources/sql/academic_universe_data.sql (星图数据)
```

### 工具SQL
```
BackWeb/BackWeb/src/main/resources/sql/EXECUTE_ME.sql (一键执行)
BackWeb/BackWeb/src/main/resources/sql/verify_data.sql (验证数据)
BackWeb/BackWeb/src/main/resources/sql/clear_all_tables.sql (清空表)
```

---

## 使用方法

1. **打开文件**：按 `Ctrl+P`，粘贴上面的路径
2. **跳转行号**：打开文件后按 `Ctrl+G`，输入行号
3. **搜索方法**：按 `Ctrl+Shift+O`，输入方法名
4. **全局搜索**：按 `Ctrl+Shift+F`，搜索代码片段

---

## 快速命令

### 查找核心方法
```
Ctrl+Shift+F 搜索：
- "public boolean register"  (用户注册)
- "public Person getPersonDetail"  (人物详情)
- "public boolean saveOrUpdatePersonDetail"  (保存人物)
- "private void fillPersonDetails"  (填充关联)
- "private void parseKeyTags"  (JSON解析)
```

### 查找核心接口
```
Ctrl+Shift+F 搜索：
- "@PostMapping("/register")"  (注册接口)
- "@GetMapping("/{personId}")"  (人物详情接口)
- "@PostMapping("/save")"  (保存接口)
```
